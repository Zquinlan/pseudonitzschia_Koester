mutate(country = gsub("_", " ", country),
country = case_when(country == "CuraÃ§ao" ~ "Curacao",
TRUE ~ as.character(country)))
#Pulls in the input countries
countries_filtered <- countries_raw%>%
filter(country %in% input$country_select)
runApp('Documents/GitHub/covid')
?GET
runApp('Documents/GitHub/covid')
#plotting
## Download country data
url <- paste("https://www.ecdc.europa.eu/sites/default/files/documents/COVID-19-geographic-disbtribution-worldwide-",
format(Sys.time(), "%Y-%m-%d"), ".xlsx", sep = "")
## read in dfs
countries_raw <-read_xlsx(url)%>%
rename(date = dateRep,
country = countriesAndTerritories)%>%
select(date, cases, deaths, country)%>%
mutate(date = as.Date(date, "%d-%m-%y"),
location_type = "country")%>%
mutate(country = gsub("_", " ", country),
country = case_when(country == "CuraÃ§ao" ~ "Curacao",
TRUE ~ as.character(country)))
runApp('Documents/GitHub/covid')
rsconnect::deployApp('~/Documents/GitHub/covid/')
?write_disk
runApp('Documents/GitHub/covid')
rsconnect::deployApp('~/Documents/GitHub/covid/')
#plotting
## Download country data
GET("https://opendata.ecdc.europa.eu/covid19/casedistribution/csv", authenticate(":", ":", type="ntlm"), write_disk(tf <- tempfile(fileext = ".csv")))
GET("https://opendata.ecdc.europa.eu/covid19/casedistribution/csv", authenticate(":", ":", type="ntlm"), write_disk(tf <- tempfile(fileext = ".csv")))
test <- read_csv(tf)
head(test)
runApp('Documents/GitHub/covid')
#plotting
## Download country data
GET("https://opendata.ecdc.europa.eu/covid19/casedistribution/csv", authenticate(":", ":", type="ntlm"), write_disk(tf <- tempfile(fileext = ".csv")))
## read in dfs
countries_raw <-read_csv(tf)%>%
rename(date = dateRep,
country = countriesAndTerritories)%>%
select(date, cases, deaths, country)%>%
mutate(date = as.Date(date, "%d-%m-%y"),
location_type = "country")%>%
mutate(country = gsub("_", " ", country),
country = case_when(country == "CuraÃ§ao" ~ "Curacao",
TRUE ~ as.character(country)))
View(countries_raw)
## read in dfs
countries_raw <-read_csv(tf)%>%
rename(date = dateRep,
country = countriesAndTerritories)%>%
select(date, cases, deaths, country)%>%
mutate(date = as.Date(date),
location_type = "country")%>%
mutate(country = gsub("_", " ", country),
country = case_when(country == "CuraÃ§ao" ~ "Curacao",
TRUE ~ as.character(country)))
runApp('Documents/GitHub/covid')
View(countries_raw)
## read in dfs
countries_raw <-read_csv(tf)%>%
rename(date = dateRep,
country = countriesAndTerritories)%>%
select(date, cases, deaths, country)
View(countries_raw)
## read in dfs
countries_raw <-read_csv(tf)%>%
rename(date = dateRep,
country = countriesAndTerritories)%>%
select(date, cases, deaths, country)%>%
mutate(date = as.Date(date, "%d/%m/%y"),
location_type = "country")%>%
mutate(country = gsub("_", " ", country),
country = case_when(country == "CuraÃ§ao" ~ "Curacao",
TRUE ~ as.character(country)))
runApp('Documents/GitHub/covid')
## read in dfs
countries_raw <-read_csv(tf)%>%
rename(date = dateRep,
country = countriesAndTerritories)%>%
select(date, cases, deaths, country)%>%
mutate(date = as.Date(date, "%d/%m/%y"),
location_type = "country")%>%
mutate(country = gsub("_", " ", country),
country = case_when(country == "CuraÃ§ao" ~ "Curacao",
TRUE ~ as.character(country)))%>%
filter(date != "2020-12-31")
runApp('Documents/GitHub/covid')
rsconnect::deployApp('~/Documents/GitHub/covid/')
rsconnect::deployApp('~/Documents/GitHub/covid/')
runApp('Documents/GitHub/covid')
runApp('Documents/GitHub/covid')
rsconnect::deployApp('~/Documents/GitHub/covid/')
rsconnect::deployApp('~/Documents/GitHub/covid/')
runApp('Documents/GitHub/covid')
runApp('Documents/GitHub/covid')
runApp('Documents/GitHub/covid')
?sidebarLayout
runApp('Documents/GitHub/covid')
runApp('Documents/GitHub/covid')
runApp('Documents/GitHub/covid')
runApp('Documents/GitHub/covid')
rsconnect::deployApp('~/Documents/GitHub/covid/')
runApp('Documents/GitHub/covid')
runApp('Documents/GitHub/covid')
runApp('Documents/GitHub/covid')
runApp('Documents/GitHub/covid')
runApp('Documents/GitHub/covid')
## read in dfs
countries_raw <-read_csv(tf)%>%
rename(date = dateRep,
country = countriesAndTerritories)%>%
select(date, cases, deaths, country)%>%
mutate(date = as.Date(date, "%d/%m/%y"),
location_type = "country",
country = gsub("_", " ", country),
country = case_when(country == "CuraÃ§ao" ~ "Curacao",
TRUE ~ as.character(country)))%>%
group_by(country)%>%
arrange(date)%>%
mutate('Cummulative Cases' = cases + lag(cases, default = first(date)))%>%
filter(date != "2020-12-31")%>%
ungroup()
View(countries_raw)
## read in dfs
countries_raw <-read_csv(tf)%>%
rename(date = dateRep,
country = countriesAndTerritories)%>%
select(date, cases, deaths, country)%>%
mutate(date = as.Date(date, "%d/%m/%y"),
location_type = "country",
country = gsub("_", " ", country),
country = case_when(country == "CuraÃ§ao" ~ "Curacao",
TRUE ~ as.character(country)))%>%
group_by(country)%>%
arrange(date)%>%
mutate('Cummulative Cases' = cumsum(cases))%>%
filter(date != "2020-12-31")%>%
ungroup()
View(countries_raw)
runApp('Documents/GitHub/covid')
head(countries_raw)
runApp('Documents/GitHub/covid')
View(countries_raw)
runApp('Documents/GitHub/covid')
## read in dfs
countries_raw <-read_csv(tf)%>%
rename(date = dateRep,
country = countriesAndTerritories,
`Cases per day` = cases)%>%
select(date, `Cases per day`, deaths, country)%>%
mutate(date = as.Date(date, "%d/%m/%y"),
location_type = "country",
country = gsub("_", " ", country),
country = case_when(country == "CuraÃ§ao" ~ "Curacao",
TRUE ~ as.character(country)))%>%
group_by(country)%>%
arrange(date)%>%
mutate('Cummulative Cases' = cumsum(`Cases per day`))%>%
filter(date != "2020-12-31")%>%
ungroup()
runApp('Documents/GitHub/covid')
## read in dfs
countries_raw <-read_csv(tf)%>%
rename(date = dateRep,
country = countriesAndTerritories,
`Cases per day` = cases)%>%
select(date, `Cases per day`, deaths, country)%>%
mutate(date = as.Date(date, "%d/%m/%y"),
location_type = "country",
country = gsub("_", " ", country),
country = case_when(country == "CuraÃ§ao" ~ "Curacao",
TRUE ~ as.character(country)))%>%
group_by(country)%>%
arrange(date)%>%
mutate(`Cases per day` = as.numeric(`Cases per day`),
'Cummulative Cases' = cumsum(`Cases per day`))%>%
filter(date != "2020-12-31")%>%
ungroup()
head(countries_raw)
runApp('Documents/GitHub/covid')
runApp('Documents/GitHub/covid')
runApp('Documents/GitHub/covid')
runApp('Documents/GitHub/covid')
?navlistPanel
runApp('Documents/GitHub/covid')
runApp('Documents/GitHub/covid')
runApp('Documents/GitHub/covid')
rsconnect::deployApp('~/Documents/GitHub/covid/')
rsconnect::deployApp('~/Documents/GitHub/covid/')
runApp('Documents/GitHub/covid')
runApp('Documents/GitHub/covid')
head(countries_raw)
runApp('Documents/GitHub/covid')
#read and clean the state data
state_raw <- read_csv(url(state_url))%>%
select(-fips)%>%
mutate(date = as.Date(date),
location_type = "state")%>%
group_by(state)%>%
arrange(date)%>%
mutate(new_cases = cases - lag(cases, default = first(date)),
new_cases = case_when(new_cases < 0 ~ 0,
TRUE ~ as.numeric(new_cases)))%>%
ungroup()
# Downlaod state data
state_url <- "https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-states.csv"
#read and clean the state data
state_raw <- read_csv(url(state_url))%>%
select(-fips)%>%
mutate(date = as.Date(date),
location_type = "state")%>%
group_by(state)%>%
arrange(date)%>%
mutate(new_cases = cases - lag(cases, default = first(date)),
new_cases = case_when(new_cases < 0 ~ 0,
TRUE ~ as.numeric(new_cases)))%>%
ungroup()
head(state_raw)
runApp('Documents/GitHub/covid')
rsconnect::deployApp('~/Documents/GitHub/covid/')
runApp('Documents/GitHub/covid')
runApp('Documents/GitHub/covid')
runApp('Documents/GitHub/covid')
rsconnect::deployApp('~/Documents/GitHub/covid/')
runApp('Documents/GitHub/covid')
countries_filtered%>%
ggplot(aes(date, plot, color = country)) +
geom_line() +
geom_point() +
scale_x_date(date_breaks = "4 days", limits = c(Sys.Date() - input$previous_days_country, NA), date_labels = "%b %d") +
xlab(paste("Date (past", input$previous_days_country, "days)")) +
ylab(input$data_type_country) +
scale_y_log10(limits = c(1, max(countries_filtered$plot + 5000)),
breaks = trans_breaks("log10", function(x) 10^x)) +
# scale_color_manual(values = wes_palette("Darjeeling1", 5, type = c('discrete'))) +
ggtitle("CoVID-19 cases by country") +
theme(
axis.text.x = element_text(angle = 60, size = 15, hjust = 1),
axis.text.y = element_text(size = 15),
axis.title = element_text(size = 17),
panel.background = element_rect(fill = "transparent"),
plot.background = element_rect(fill = "transparent", color = NA),
panel.grid.major.y = element_line(size = 0.2, linetype = 'solid',colour = "gray"),
panel.grid.minor.y = element_line(size = 0.2, linetype = 'solid',colour = "gray"),
panel.grid.major.x = element_line(size = 0.2, linetype = 'solid',colour = "gray"),
legend.background = element_rect(fill = "transparent"),
legend.box.background = element_rect(fill = "transparent"),
legend.text = element_text(size = 15),
legend.title = element_text(size = 17),
legend.position = "right",
plot.title = element_text(hjust = 0.5, size = 25))
runApp('Documents/GitHub/covid')
rsconnect::deployApp('~/Documents/GitHub/covid/')
runApp('Documents/GitHub/covid')
rsconnect::deployApp('~/Documents/GitHub/covid/')
runApp('Documents/GitHub/covid')
runApp('Documents/GitHub/covid')
runApp('Documents/GitHub/covid')
runApp('Documents/GitHub/covid')
rsconnect::deployApp('~/Documents/GitHub/covid/')
rsconnect::deployApp('~/Documents/GitHub/covid/')
#plotting
## Download country data
GET("https://opendata.ecdc.europa.eu/covid19/casedistribution/csv", authenticate(":", ":", type="ntlm"), write_disk(tf <- tempfile(fileext = ".csv")))
library(tidyverse)
library(readxl)
library(httr)
library(wesanderson)
library(scales)
#plotting
## Download country data
GET("https://opendata.ecdc.europa.eu/covid19/casedistribution/csv", authenticate(":", ":", type="ntlm"), write_disk(tf <- tempfile(fileext = ".csv")))
## read in dfs
countries_raw <-read_csv(tf)%>%
rename(date = dateRep,
country = countriesAndTerritories,
`Cases per day` = `cases`,
Deaths = deaths)%>%
group_by(country)%>%
arrange(date)%>%
mutate(`Total Confirmed Cases` = cumsum(`Cases per day`))%>%
ungroup()%>%
select(date, country, input$data_type_country)%>%
rename(plot = 3)%>%
mutate(date = as.Date(date, "%d/%m/%y"),
country = gsub("_", " ", country),
country = case_when(country == "CuraÃ§ao" ~ "Curacao",
TRUE ~ as.character(country)))%>%
filter(date != "2020-12-31")
View(countries_raw)
## read in dfs
countries_raw <-read_csv(tf)%>%
rename(date = dateRep,
country = countriesAndTerritories,
`Cases per day` = `cases`,
Deaths = deaths)%>%
group_by(country)%>%
arrange(date)%>%
mutate(`Total Confirmed Cases` = cumsum(`Cases per day`))%>%
ungroup()
View(countries_raw)
?population
?radioButtons
?radioButtons
shiny::runApp('Documents/GitHub/covid')
runApp('Documents/GitHub/covid')
# Downlaod state data
state_url <- "https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-states.csv"
#read and clean the state data
state_raw <- read_csv(url(state_url))%>%
select(-fips)%>%
mutate(date = as.Date(date))%>%
group_by(state)%>%
arrange(date)%>%
mutate(`Cases per day` = cases - lag(cases, default = first(date)),
`Cases per day` = case_when(`Cases per day` < 0 ~ 0,
TRUE ~ as.numeric(`Cases per day`)))%>%
rename(`Total Confirmed Cases` = cases,
Deaths = deaths)%>%
ungroup()
head(state_raw)
runApp('Documents/GitHub/covid')
?print
runApp('Documents/GitHub/covid')
test <- read_csv("~/Downloads/cc-est2018-alldata.csv"P))
test <- read_csv("~/Downloads/cc-est2018-alldata.csv")
head(test)
View(test)
census <- test%>% select(STNAME, CTYNAME, YEAR, AGEGRP, TOT_POP)%>%
filter(YEAR == "11", AGEGRP = 0)%>%
rename(state = STNAME,)
ensus <- test%>% select(STNAME, CTYNAME, YEAR, AGEGRP, TOT_POP)%>%
+ filter(YEAR == "11", AGEGRP = 0)%>%
+ rename(state = STNAME, county = CTYNAME, population = TOT_POP)%>%
select(state, county, population)
census <- test%>% select(STNAME, CTYNAME, YEAR, AGEGRP, TOT_POP)%>% filter(YEAR == "11", AGEGRP = 0)%>% rename(state = STNAME, county = CTYNAME, population = TOT_POP)%>% select(state, county, population)
census <- test%>%
select(STNAME, CTYNAME, YEAR, AGEGRP, TOT_POP)%>%
filter(YEAR == "11", AGEGRP = 0)%>%
rename(state = STNAME,
county = CTYNAME,
population = TOT_POP)%>%
select(state, county, population)
census <- test%>%
select(STNAME, CTYNAME, YEAR, AGEGRP, TOT_POP)%>%
filter(YEAR == "11", AGEGRP == 0)%>%
rename(state = STNAME,
county = CTYNAME,
population = TOT_POP)%>%
select(state, county, population)
census <- test%>%
select(STNAME, CTYNAME, YEAR, AGEGRP, TOT_POP)%>%
filter(YEAR == "11", AGEGRP == "0")%>%
rename(state = STNAME,
county = CTYNAME,
population = TOT_POP)%>%
select(state, county, population)
View(census)
census <- test%>%
select(STNAME, CTYNAME, YEAR, AGEGRP, TOT_POP)%>%
filter(YEAR == "11", AGEGRP == "0")%>%
rename(state = STNAME,
county = CTYNAME,
population = TOT_POP)%>%
select(state, county, population)%>%
mutate(county = gsub(" County", "", county))
write_csv(census, "~/Documents/GitHub/covid/us_census_data.csv")
census_url <- "https://raw.githubusercontent.com/Zquinlan/ShinyApp_CoVID19/master/us_census_data.csv"
#read and clean the state data
state_census <- read_csv(url(census_url))%>%
group_by(state)%>%
summarize_if(is.numeric, sum)
View(state_census)
runApp('Documents/GitHub/covid')
# Downlaod state data
state_url <- "https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-states.csv"
census_url <- "https://raw.githubusercontent.com/Zquinlan/ShinyApp_CoVID19/master/us_census_data.csv"
#read and clean the state data
county_census <- read_csv(url(census_url))
state_census <- county_census%>%
group_by(state)%>%
summarize_if(is.numeric, sum)
state_raw <- read_csv(url(state_url))%>%
select(-fips)%>%
mutate(date = as.Date(date))%>%
group_by(state)%>%
arrange(date)%>%
mutate(`Cases per day` = cases - lag(cases, default = first(date)),
`Cases per day` = case_when(`Cases per day` < 0 ~ 0,
TRUE ~ as.numeric(`Cases per day`)))%>%
rename(`Total Confirmed Cases` = cases,
Deaths = deaths)%>%
ungroup()%>%
left_join(state_census, by = "state")%>%
select(date, state,cases, population)%>%
rename(plot = 3)%>%
plot = case_when(input$pop_divider_state == "Not relativized" ~ plot,
input$pop_divider_state == "Percent of Population" ~ plot/population*100,
input$pop_divider_state == "Cases per 100,000 people" ~ plot/population*100000)
state_raw <- read_csv(url(state_url))%>%
select(-fips)%>%
mutate(date = as.Date(date))%>%
group_by(state)%>%
arrange(date)%>%
mutate(`Cases per day` = cases - lag(cases, default = first(date)),
`Cases per day` = case_when(`Cases per day` < 0 ~ 0,
TRUE ~ as.numeric(`Cases per day`)))%>%
rename(`Total Confirmed Cases` = cases,
Deaths = deaths)%>%
ungroup()%>%
left_join(state_census, by = "state")
View(state_raw)
runApp('Documents/GitHub/covid')
state_raw <- read_csv(url(state_url))%>%
select(-fips)%>%
mutate(date = as.Date(date))%>%
group_by(state)%>%
arrange(date)%>%
mutate(`Cases per day` = cases - lag(cases, default = first(date)),
`Cases per day` = case_when(`Cases per day` < 0 ~ 0,
TRUE ~ as.numeric(`Cases per day`)))%>%
rename(`Total Confirmed Cases` = cases,
Deaths = deaths)%>%
ungroup()%>%
left_join(state_census, by = "state")
state_raw <- read_csv(url(state_url))%>%
select(-fips)%>%
mutate(date = as.Date(date))%>%
group_by(state)%>%
arrange(date)%>%
mutate(`Cases per day` = cases - lag(cases, default = first(date)),
`Cases per day` = case_when(`Cases per day` < 0 ~ 0,
TRUE ~ as.numeric(`Cases per day`)))%>%
rename(`Total Confirmed Cases` = cases,
Deaths = deaths)%>%
ungroup()%>%
left_join(state_census, by = "state")
#read and clean the state data
county_census <- read_csv(url(census_url))%>%
mutate(population = as.numeric(population))
state_census <- county_census%>%
group_by(state)%>%
summarize_if(is.numeric, sum)
state_raw <- read_csv(url(state_url))%>%
select(-fips)%>%
mutate(date = as.Date(date))%>%
group_by(state)%>%
arrange(date)%>%
mutate(`Cases per day` = cases - lag(cases, default = first(date)),
`Cases per day` = case_when(`Cases per day` < 0 ~ 0,
TRUE ~ as.numeric(`Cases per day`)))%>%
rename(`Total Confirmed Cases` = cases,
Deaths = deaths)%>%
ungroup()%>%
left_join(state_census, by = "state")
View(state_raw)
test <- state_raw%>% mutate(test = `total Confirmed Cases`/population)
test <- state_raw%>% mutate(test = `Total Confirmed Cases`/population)
View(test)
runApp('Documents/GitHub/covid')
runApp('Documents/GitHub/covid')
rsconnect::deployApp('~/Documents/GitHub/covid/')
runApp('Documents/GitHub/covid')
rsconnect::deployApp('~/Documents/GitHub/covid/')
rsconnect::deployApp('~/Documents/GitHub/covid/')
runApp('Documents/GitHub/covid')
runApp('Documents/GitHub/covid')
rsconnect::deployApp('~/Documents/GitHub/covid/')
rsconnect::deployApp('~/Documents/GitHub/covid/')
)
source('~/.active-rstudio-document', echo=TRUE)
analog <- read_csv('~/Downloads/RR3_Analog_InChI_ForClassyfire.csv')
library <- read_csv('~/Downloads/RR3_Library_InChI_ForClassyfire.csv')
View(library)
read_csv?
?read_csv
analog <- read_csv('~/Downloads/RR3_Analog_InChI_ForClassyfire.csv', col_names = FALSE)
library <- read_csv('~/Downloads/RR3_Library_InChI_ForClassyfire.csv', col_names = FALSE)%>%
mutate(inchikey = cs_inchi_inchikey(X2))
library <- read_csv('~/Downloads/RR3_Library_InChI_ForClassyfire.csv', col_names = FALSE)%>%
group_by(X1)%>%
mutate(inchikey = cs_inchi_inchikey(X2))
source('~/.active-rstudio-document', echo=TRUE)
write_csv(analog%>%
filter(~is.na(inchikey)), "rr3_analog_inchikey.csv")
write_csv(analog%>%
filter(!is.na(inchikey)), "rr3_analog_inchikey.csv")
write_csv(library%>%
filter(!is.na(inchikey)), "rr3_library_inchikey.csv")
write_csv(analog%>%
filter(!is.na(inchikey)), "~/Downloads/rr3_analog_inchikey.csv")
write_csv(library%>%
filter(!is.na(inchikey)), "~/Downloads/rr3_library_inchikey.csv")
analog_key <- read_csv('~/Downloads/analog.csv')
library_key <- read_csv('~/Downloads/library.csv')
view(library_key)
analog_key <- read_csv('~/Downloads/analog.csv')%>%
rename(inchikey =  1)
library_full <- library%>%
left_join(library_key, by = "inchikey")
library_key <- read_csv('~/Downloads/library.csv')%>%
rename(inchikey =  1)
library_full <- library%>%
left_join(library_key, by = "inchikey")
analog_full <- analog%>%
left_join(analog_key, by = "inchikey")
write_csv(analog_full, "~/Downloads/rr3_analog_classyfire.csv")
write_csv(library_full, "~/Downloads/rr3_library_classyfire.csv")
setwd("~/Documents/GitHub/pseudonitzschia_Koester/Data/")
